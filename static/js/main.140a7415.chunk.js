(this["webpackJsonpelder-scrolls-legends-card-viewer"]=this["webpackJsonpelder-scrolls-legends-card-viewer"]||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),o=(a(58),a(59),a(23)),s=a(9),l=a(10),i=a(41),d=a(20),u=a(25),m=a.n(u),h=a(42),f=a(43),p=a(44),v=a(26),S=a.n(v);var _=function(){function e(t){Object(f.a)(this,e),this.cardsApiUrl=void 0,this.cancelToken=void 0,this.cardsApiUrl=t||"".concat("https://api.elderscrollslegends.io","/v1/cards"),this.cancelToken=S.a.CancelToken.source()}return Object(p.a)(e,[{key:"fetchCards",value:function(e){var t={params:{pageSize:20,cancelToken:this.cancelToken}};return e&&(t.params.name=e),S.a.get(this.cardsApiUrl,t).then((function(e){return e.data}))}},{key:"token",get:function(){return this.cancelToken}}]),e}(),g="esl_getCards",E="esl_updateGetCardsFetchState",C="esl_failureGetCardsFetchState",N="esl_addCards",y="esl_setCards",b="esl_resetSearchState";function x(e){var t,a,r=(null===(t=e.cards)||void 0===t?void 0:t.length)||0,n=null===(a=e.cardListInfo.searchResponse)||void 0===a?void 0:a._totalCount;return void 0===n||r<n}var j,L=0,k={getNextCards:function(e){var t=this,a=++L;return function(){var r=Object(h.a)(m.a.mark((function r(n,c){var o,s,l,i,d,u,h;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,x(l=c().cardState)){r.next=4;break}return r.abrupt("return");case 4:return n(t.updateGetCardsFetchState()),i=null===(o=l.cardListInfo.searchResponse)||void 0===o?void 0:null===(s=o._links)||void 0===s?void 0:s.next,d=new _(i),r.next=9,d.fetchCards(e);case 9:if(u=r.sent,a===L){r.next=12;break}return r.abrupt("return");case 12:h=u.cards,u.cards=[],n({type:N,payload:h}),n({type:g,payload:u}),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),n(t.failureGetCardsFetchState(r.t0.toString()));case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}()},resetSearchState:function(){return function(e){e({type:b}),e({type:y,payload:[]})}},updateGetCardsFetchState:function(){return function(e){e({type:E})}},failureGetCardsFetchState:function(e){return function(t){t({type:C,payload:e})}}};!function(e){e[e.Loading=0]="Loading",e[e.Success=1]="Success",e[e.Error=2]="Error"}(j||(j={}));var O=Object(l.c)({cardListInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchResponse:null,fetchState:j.Success,error:""},t=arguments.length>1?arguments[1]:void 0;return t.type===g?{searchResponse:t.payload,fetchState:j.Success,error:e.error}:t.type===E?{searchResponse:e.searchResponse,fetchState:j.Loading,error:e.error}:t.type===C?{searchResponse:e.searchResponse,fetchState:j.Error,error:t.payload}:t.type===b?{searchResponse:null,fetchState:j.Success,error:""}:e},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===N?[].concat(Object(d.a)(e),Object(d.a)(t.payload)):t.type===y?Object(d.a)(t.payload):e}}),w=a(45),R=Object(l.c)({cardState:O}),G=Object(w.createLogger)({}),T=Object(l.d)(R,Object(l.a)(i.a,G)),H=a(46),I=a.n(H),F=a(11),M=a(27),B=a.n(M);function J(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(t||[]).filter((function(e){return!!e})).join(" ")}function U(e){var t=e.className;return n.a.createElement("div",{className:J("NoMatch",B.a.NoMatch,t)},n.a.createElement("div",{className:B.a.error},"Page not found"))}var A=a(19),W=a(47),K=a.n(W),P=a(16),Y=a.n(P),z=a(13),D=a.n(z),q=function(e){var t,a=e.className,r=e.card,c=function(e,t){return t?n.a.createElement("div",{className:D.a.property},n.a.createElement("span",{className:D.a.title},e),n.a.createElement("span",null,t)):null};return n.a.createElement("div",{className:J("Card",D.a.Card,a)},n.a.createElement("div",{className:J(D.a.name,r.rarity)},r.name),n.a.createElement("div",null,n.a.createElement("img",{className:D.a.image,src:r.imageUrl,alt:r.name})),n.a.createElement("div",{className:D.a.description},c("Text",r.text),c("Set",null===(t=r.set)||void 0===t?void 0:t.name),c("Type",r.type)))},Q=a(48),$=a.n(Q),V=a(49),X=function(e){var t=e.className,a=e.loading;return n.a.createElement("div",{className:J("Loader",$.a.Loader,t)},n.a.createElement(V.PropagateLoader,{size:40,loading:a,color:"#0078d4"}))},Z=function(e){var t,a=e.className,r=Object(s.c)((function(e){return e.cardState.cardListInfo})),c=r.fetchState,o=r.error,l=Object(s.c)((function(e){return e.cardState.cards})),i=function(e){return n.a.createElement(q,{key:e.id,card:e})};return n.a.createElement("div",{className:J("CardGrid",Y.a.CardGrid,a)},(t=l,n.a.createElement("div",{className:Y.a.cardList},(t||[]).map(i))),0===(null===l||void 0===l?void 0:l.length)&&c===j.Success?n.a.createElement("div",{className:Y.a.noResults},"No results"):null,c===j.Error?n.a.createElement("div",{className:Y.a.error},o):null,n.a.createElement(X,{loading:c===j.Loading}))},ee=a(50),te=a.n(ee),ae=function(e){var t=e.className,a=e.children,r=e.onScroll,c=e.onScrollToBottom,o=function(e){if(c){var t=e.target;t.scrollTop+t.clientHeight+5>=t.scrollHeight&&c()}};return n.a.createElement("div",{className:J("ScrollContainer",te.a.ScrollContainer,t),onScroll:function(e){r&&r(e),o(e)}},a)},re=a(28),ne=a.n(re),ce=a(51),oe=a.n(ce),se=function(e){var t=e.className,a=e.onSeach,c=e.onReset,o=Object(r.useState)(""),s=Object(A.a)(o,2),l=s[0],i=s[1];return n.a.createElement("div",{className:J("Search",ne.a.Search,t)},n.a.createElement(oe.a,{className:ne.a.search,placeholder:"Search by name",onChange:function(e){!e&&c&&c(),i(e)},onKeyDown:function(e){if("Enter"===e.key){var t=e.target;a&&a(t.value)}}}),n.a.createElement("button",{onClick:function(){a&&a(l)},disabled:!l.trim()},"Search"))};function le(e){var t=e.className,a=Object(r.useState)(!1),c=Object(A.a)(a,2),o=c[0],l=c[1],i=Object(s.c)((function(e){return e.cardState.cards})),d=Object(s.c)((function(e){return e.cardState.cardListInfo})),u=d.fetchState,m=d.searchResponse,h=Object(s.b)();Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.length)||h(k.getNextCards())}),[]);return n.a.createElement("div",{className:J("Home",K.a.Home,t)},n.a.createElement(ae,{onScrollToBottom:function(){((null===i||void 0===i?void 0:i.length)||0)!==(null===m||void 0===m?void 0:m._totalCount)&&u!==j.Loading&&h(k.getNextCards())}},n.a.createElement(se,{onSeach:function(e){e.trim()&&(l(!0),h(k.resetSearchState()),h(k.getNextCards(e.trim())))},onReset:function(){o&&(l(!1),h(k.resetSearchState()),h(k.getNextCards()))}}),n.a.createElement(Z,null)))}function ie(e){var t=e.className;return n.a.createElement("div",{className:J("Shell",I.a.Shell,t)},n.a.createElement(F.c,null,n.a.createElement(F.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(le,e)}}),n.a.createElement(F.a,{component:U})))}var de=function(){return n.a.createElement(o.a,null,n.a.createElement(s.a,{store:T},n.a.createElement(ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(c.render)(n.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},13:function(e,t,a){e.exports={Card:"Card_Card__13KuB",name:"Card_name__1JNoW",image:"Card_image__hYcBS",description:"Card_description__2S1dL",property:"Card_property__miSIb",title:"Card_title__3msqo"}},16:function(e,t,a){e.exports={CardGrid:"CardGrid_CardGrid__1sPE3",cardList:"CardGrid_cardList__28h8Q",noResults:"CardGrid_noResults__xeT67",error:"CardGrid_error__vtpKJ"}},27:function(e,t,a){e.exports={NoMatch:"NoMatch_NoMatch__32soE",error:"NoMatch_error__3S7W8"}},28:function(e,t,a){e.exports={Search:"Search_Search__2nItf",search:"Search_search__LkDYF"}},46:function(e,t,a){e.exports={Shell:"Shell_Shell__UHY2-"}},47:function(e,t,a){e.exports={Home:"Home_Home__1yJ2M"}},48:function(e,t,a){e.exports={Loader:"Loader_Loader__25h87"}},50:function(e,t,a){e.exports={ScrollContainer:"ScrollContainer_ScrollContainer__3EiLv"}},53:function(e,t,a){e.exports=a(109)},58:function(e,t,a){},59:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.140a7415.chunk.js.map