{"version":3,"sources":["utils/FetchClient.ts","appSettings.ts","store/actions.ts","store/reducers.ts","store/store.ts","utils/utils.ts","pages/shell/NoMatch.tsx","shared/cards/components/Card.tsx","shared/cards/components/Loader.tsx","shared/cards/CardGrid.tsx","shared/scrollContainer/ScrollContainer.tsx","shared/search/Search.tsx","pages/home/Home.tsx","pages/shell/Shell.tsx","App.tsx","serviceWorker.ts","index.tsx","shared/cards/components/Card.module.scss","shared/cards/CardGrid.module.scss","pages/shell/NoMatch.module.scss","shared/search/Search.module.scss","pages/shell/Shell.module.scss","pages/home/Home.module.scss","shared/cards/components/Loader.module.scss","shared/scrollContainer/ScrollContainer.module.scss"],"names":["FetchClient","nextUrl","cardsApiUrl","cancelToken","this","axios","CancelToken","source","namePattern","config","params","pageSize","name","get","then","response","data","actionTypes","hasMoreCards","cardState","cardsCount","cards","length","totalCount","cardListInfo","searchResponse","_totalCount","undefined","FetchState","requestId","actions","getNextCards","curRequestId","dispatch","getState","a","updateGetCardsFetchState","_links","next","client","fetchCards","result","type","payload","failureGetCardsFetchState","toString","resetSearchState","error","cardReducers","combineReducers","state","fetchState","Success","action","Loading","Error","rootReducer","logger","createLogger","store","createStore","applyMiddleware","thunk","buildClassName","classNames","filter","join","NoMatch","className","styles","Card","card","renderProperty","label","property","title","rarity","image","src","imageUrl","alt","description","text","set","Loader","loading","size","color","CardGrid","cardList","useSelector","renderSingleCard","key","id","map","noResults","ScrollContainer","children","onScroll","onScrollToBottom","handleScrollBottom","event","element","target","scrollTop","clientHeight","scrollHeight","Search","onSeach","onReset","useState","searchQuery","setSearchQuery","search","placeholder","onChange","newValue","onKeyDown","value","onClick","disabled","trim","Home","searchMode","setSearchMode","useDispatch","useEffect","query","Shell","exact","path","render","props","component","App","Boolean","window","location","hostname","match","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.140a7415.chunk.js","sourcesContent":["import axios, { AxiosResponse, CancelTokenSource, AxiosRequestConfig } from \"axios\"\r\nimport { eslApiEndpoint } from \"../appSettings\"\r\n\r\nexport interface EslSearchResponse {\r\n    cards: CardInfo[]\r\n    _links: { next?: string; prev?: string }\r\n    _pageSize: number\r\n    _totalCount: number\r\n}\r\n\r\nexport interface CardInfo {\r\n    id: string\r\n    attributes: string[]\r\n    collectible: boolean\r\n    cost: number\r\n    imageUrl: string\r\n    name: string\r\n    rarity: string\r\n    set: CardSet\r\n    text: string\r\n    type: string\r\n    unique: boolean\r\n}\r\n\r\nexport interface CardSet {\r\n    id: string\r\n    name: string\r\n    _self: string\r\n}\r\n\r\nconst defaultPageSize = 20\r\n\r\nfunction getCardsApiUrl(): string {\r\n    return `${eslApiEndpoint}/v1/cards`\r\n}\r\n\r\n/**\r\n * Helper class to make API http requests\r\n */\r\nexport class FetchClient {\r\n    private readonly cardsApiUrl: string\r\n    private readonly cancelToken: CancelTokenSource\r\n\r\n    constructor(nextUrl?: string) {\r\n        this.cardsApiUrl = nextUrl || getCardsApiUrl()\r\n        this.cancelToken = axios.CancelToken.source()\r\n    }\r\n\r\n    get token() {\r\n        return this.cancelToken\r\n    }\r\n\r\n    fetchCards(namePattern?: string): Promise<EslSearchResponse> {\r\n        const config: AxiosRequestConfig = {\r\n            params: {\r\n                pageSize: defaultPageSize,\r\n                cancelToken: this.cancelToken,\r\n            },\r\n        }\r\n        if (namePattern) {\r\n            config.params.name = namePattern\r\n        }\r\n\r\n        return axios.get(this.cardsApiUrl, config).then((response: AxiosResponse<EslSearchResponse>) => {\r\n            return response.data\r\n        })\r\n    }\r\n}\r\n","export const eslApiEndpoint = \"https://api.elderscrollslegends.io\"\r\n","import { Action, Dispatch } from \"redux\"\r\nimport { ThunkAction } from \"redux-thunk\"\r\nimport { FetchClient, EslSearchResponse, CardInfo } from \"../utils/FetchClient\"\r\nimport { RootState } from \"./store\"\r\nimport { CardState } from \"./reducers\"\r\n\r\ninterface PayloadAction<T> extends Action {\r\n    type: string\r\n    payload: T\r\n}\r\n\r\nexport const actionTypes = {\r\n    getCards: \"esl_getCards\",\r\n    updateGetCardsFetchState: \"esl_updateGetCardsFetchState\",\r\n    failureGetCardsFetchState: \"esl_failureGetCardsFetchState\",\r\n    addCards: \"esl_addCards\",\r\n    setCards: \"esl_setCards\",\r\n    resetSearchState: \"esl_resetSearchState\",\r\n    setCancelToken: \"esl_setCancelToken\",\r\n}\r\n\r\nexport interface GetSearchResponseAction extends PayloadAction<EslSearchResponse> {}\r\nexport interface SetGetCardsFailureAction extends PayloadAction<string> {}\r\nexport interface AddCardsAction extends PayloadAction<CardInfo[]> {}\r\nexport interface SetCardsAction extends PayloadAction<CardInfo[]> {}\r\n\r\nexport type ThunkPromiseAction = ThunkAction<Promise<void>, RootState, undefined, Action>\r\nexport type ThunkVoidAction = ThunkAction<void, RootState, undefined, Action>\r\n\r\nfunction hasMoreCards(cardState: CardState): boolean {\r\n    const cardsCount = cardState.cards?.length || 0\r\n    const totalCount = cardState.cardListInfo.searchResponse?._totalCount\r\n    return totalCount === undefined || cardsCount < totalCount\r\n}\r\n\r\n// Unique request id to synchronize http requests\r\nlet requestId = 0\r\n\r\nexport const actions = {\r\n    getNextCards(namePattern?: string): ThunkPromiseAction {\r\n        requestId++\r\n        const curRequestId = requestId\r\n        return async (dispatch: Dispatch<any>, getState: () => RootState): Promise<void> => {\r\n            try {\r\n                const cardState = getState().cardState\r\n                if (!hasMoreCards(cardState)) {\r\n                    return\r\n                }\r\n\r\n                dispatch(this.updateGetCardsFetchState())\r\n                const nextUrl = cardState.cardListInfo.searchResponse?._links?.next\r\n                const client = new FetchClient(nextUrl)\r\n                const result = await client.fetchCards(namePattern)\r\n                // Cancel results for stale request\r\n                if (curRequestId !== requestId) {\r\n                    return\r\n                }\r\n                const cards = result.cards\r\n                // don't save card list twice\r\n                result.cards = []\r\n                dispatch<AddCardsAction>({\r\n                    type: actionTypes.addCards,\r\n                    payload: cards,\r\n                })\r\n                dispatch<GetSearchResponseAction>({\r\n                    type: actionTypes.getCards,\r\n                    payload: result,\r\n                })\r\n            } catch (err) {\r\n                dispatch(this.failureGetCardsFetchState(err.toString()))\r\n            }\r\n        }\r\n    },\r\n    resetSearchState(): ThunkVoidAction {\r\n        return (dispatch: Dispatch): void => {\r\n            dispatch({\r\n                type: actionTypes.resetSearchState,\r\n            })\r\n            dispatch<SetCardsAction>({\r\n                type: actionTypes.setCards,\r\n                payload: [],\r\n            })\r\n        }\r\n    },\r\n    updateGetCardsFetchState(): ThunkVoidAction {\r\n        return (dispatch: Dispatch): void => {\r\n            dispatch({\r\n                type: actionTypes.updateGetCardsFetchState,\r\n            })\r\n        }\r\n    },\r\n    failureGetCardsFetchState(error: string): ThunkVoidAction {\r\n        return (dispatch: Dispatch): void => {\r\n            dispatch<SetGetCardsFailureAction>({\r\n                type: actionTypes.failureGetCardsFetchState,\r\n                payload: error,\r\n            })\r\n        }\r\n    },\r\n}\r\n","import {\r\n    actionTypes,\r\n    GetSearchResponseAction,\r\n    SetGetCardsFailureAction,\r\n    AddCardsAction,\r\n    SetCardsAction,\r\n} from \"./actions\"\r\nimport { combineReducers } from \"redux\"\r\nimport { EslSearchResponse, CardInfo } from \"../utils/FetchClient\"\r\n\r\nexport enum FetchState {\r\n    Loading,\r\n    Success,\r\n    Error,\r\n}\r\n\r\nexport interface CardState {\r\n    cardListInfo: Readonly<{\r\n        searchResponse: EslSearchResponse | null\r\n        fetchState: FetchState\r\n        error: string\r\n    }>\r\n    cards: Readonly<CardInfo[]>\r\n}\r\n\r\nfunction cardListInfo(\r\n    state: CardState[\"cardListInfo\"] = {\r\n        searchResponse: null,\r\n        fetchState: FetchState.Success,\r\n        error: \"\",\r\n    },\r\n    action: GetSearchResponseAction | SetGetCardsFailureAction\r\n): CardState[\"cardListInfo\"] {\r\n    if (action.type === actionTypes.getCards) {\r\n        return {\r\n            searchResponse: action.payload as EslSearchResponse,\r\n            fetchState: FetchState.Success,\r\n            error: state.error,\r\n        }\r\n    } else if (action.type === actionTypes.updateGetCardsFetchState) {\r\n        return {\r\n            searchResponse: state.searchResponse,\r\n            fetchState: FetchState.Loading,\r\n            error: state.error,\r\n        }\r\n    } else if (action.type === actionTypes.failureGetCardsFetchState) {\r\n        return {\r\n            searchResponse: state.searchResponse,\r\n            fetchState: FetchState.Error,\r\n            error: action.payload as string,\r\n        }\r\n    } else if (action.type === actionTypes.resetSearchState) {\r\n        return {\r\n            searchResponse: null,\r\n            fetchState: FetchState.Success,\r\n            error: \"\",\r\n        }\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nfunction cards(state: CardInfo[] = [], action: AddCardsAction | SetCardsAction): CardInfo[] {\r\n    if (action.type === actionTypes.addCards) {\r\n        return [...state, ...action.payload]\r\n    } else if (action.type === actionTypes.setCards) {\r\n        return [...action.payload]\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nexport const cardReducers = combineReducers({ cardListInfo, cards })\r\n","import { applyMiddleware, combineReducers, createStore } from \"redux\"\r\nimport thunk from \"redux-thunk\"\r\nimport { cardReducers } from \"./reducers\"\r\nimport { createLogger } from \"redux-logger\"\r\n\r\nexport const rootReducer = combineReducers({\r\n    cardState: cardReducers,\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n\r\nconst logger = createLogger({\r\n    // ...options\r\n})\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk, logger))\r\n","export function buildClassName(...classNames: any[]): string {\r\n    return (classNames || []).filter(name => !!name).join(\" \")\r\n}\r\n","import React from \"react\"\r\nimport styles from \"./NoMatch.module.scss\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\n\r\ninterface NoMatchProps {\r\n    className?: string\r\n}\r\n\r\nexport function NoMatch({ className }: NoMatchProps): JSX.Element {\r\n    return (\r\n        <div className={buildClassName(\"NoMatch\", styles.NoMatch, className)}>\r\n            <div className={styles.error}>Page not found</div>\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\"\r\nimport styles from \"./Card.module.scss\"\r\nimport { buildClassName } from \"../../../utils/utils\"\r\nimport { CardInfo } from \"../../../utils/FetchClient\"\r\n\r\ninterface CardProps {\r\n    className?: string\r\n    card: CardInfo\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({ className, card }): JSX.Element => {\r\n    const renderProperty = (label: string, property?: string): JSX.Element | null => {\r\n        if (!property) return null\r\n        return (\r\n            <div className={styles.property}>\r\n                <span className={styles.title}>{label}</span>\r\n                <span>{property}</span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className={buildClassName(\"Card\", styles.Card, className)}>\r\n            <div className={buildClassName(styles.name, card.rarity)}>{card.name}</div>\r\n            <div>\r\n                <img className={styles.image} src={card.imageUrl} alt={card.name} />\r\n            </div>\r\n            <div className={styles.description}>\r\n                {renderProperty(\"Text\", card.text)}\r\n                {renderProperty(\"Set\", card.set?.name)}\r\n                {renderProperty(\"Type\", card.type)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\"\r\nimport styles from \"./Loader.module.scss\"\r\nimport { buildClassName } from \"../../../utils/utils\"\r\nimport { PropagateLoader } from \"react-spinners\"\r\n\r\ninterface LoaderProps {\r\n    className?: string\r\n    loading: boolean\r\n}\r\n\r\nexport const Loader: React.FC<LoaderProps> = ({ className, loading }): JSX.Element => {\r\n    return (\r\n        <div className={buildClassName(\"Loader\", styles.Loader, className)}>\r\n            <PropagateLoader size={40} loading={loading} color=\"#0078d4\" />\r\n        </div>\r\n    )\r\n}\r\n","import React, { UIEventHandler } from \"react\"\r\nimport styles from \"./CardGrid.module.scss\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { RootState } from \"../../store/store\"\r\nimport { CardInfo } from \"../../utils/FetchClient\"\r\nimport { Card } from \"./components/Card\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\nimport { FetchState } from \"../../store/reducers\"\r\nimport { Loader } from \"./components/Loader\"\r\n\r\ninterface CardGridProps {\r\n    className?: string\r\n    onScroll?: UIEventHandler\r\n}\r\n\r\nexport const CardGrid: React.FC<CardGridProps> = ({ className }): JSX.Element => {\r\n    const { fetchState, error } = useSelector((state: RootState) => state.cardState.cardListInfo)\r\n    const cards = useSelector((state: RootState) => state.cardState.cards)\r\n\r\n    const renderCardList = (cardList: CardInfo[]): JSX.Element => (\r\n        <div className={styles.cardList}>{(cardList || []).map(renderSingleCard)}</div>\r\n    )\r\n\r\n    const renderSingleCard = (card: CardInfo): JSX.Element => <Card key={card.id} card={card} />\r\n\r\n    const renderNoResult = (): JSX.Element | null => {\r\n        if (cards?.length === 0 && fetchState === FetchState.Success) {\r\n            return <div className={styles.noResults}>No results</div>\r\n        }\r\n        return null\r\n    }\r\n\r\n    const renderError = (): JSX.Element | null => {\r\n        if (fetchState === FetchState.Error) {\r\n            return <div className={styles.error}>{error}</div>\r\n        }\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={buildClassName(\"CardGrid\", styles.CardGrid, className)}>\r\n            {renderCardList(cards)}\r\n            {renderNoResult()}\r\n            {renderError()}\r\n            <Loader loading={fetchState === FetchState.Loading} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { UIEventHandler } from \"react\"\r\nimport styles from \"./ScrollContainer.module.scss\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\n\r\ninterface ScrollContainerProps {\r\n    className?: string\r\n    onScroll?: UIEventHandler\r\n    onScrollToBottom?: () => void\r\n}\r\n\r\nconst margin = 5\r\n\r\nexport const ScrollContainer: React.FC<ScrollContainerProps> = ({\r\n    className,\r\n    children,\r\n    onScroll,\r\n    onScrollToBottom,\r\n}): JSX.Element => {\r\n    const handleSroll: UIEventHandler<HTMLDivElement> = event => {\r\n        onScroll && onScroll(event)\r\n        handleScrollBottom(event)\r\n    }\r\n\r\n    const handleScrollBottom = (event: React.UIEvent<HTMLDivElement>): void => {\r\n        if (!onScrollToBottom) return\r\n        const element = event.target as HTMLDivElement\r\n        if (element.scrollTop + element.clientHeight + margin >= element.scrollHeight) {\r\n            onScrollToBottom()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={buildClassName(\"ScrollContainer\", styles.ScrollContainer, className)} onScroll={handleSroll}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from \"react\"\r\nimport styles from \"./Search.module.scss\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\n// @ts-ignore\r\nimport SearchInput from \"react-search-input\"\r\n\r\ninterface SearchProps {\r\n    className?: string\r\n    onSeach?: (query: string) => void\r\n    onReset?: () => void\r\n}\r\n\r\nexport const Search: React.FC<SearchProps> = ({ className, onSeach, onReset }): JSX.Element => {\r\n    const [searchQuery, setSearchQuery] = useState(\"\")\r\n\r\n    return (\r\n        <div className={buildClassName(\"Search\", styles.Search, className)}>\r\n            <SearchInput\r\n                className={styles.search}\r\n                placeholder=\"Search by name\"\r\n                onChange={(newValue: string) => {\r\n                    if (!newValue && onReset) {\r\n                        onReset()\r\n                    }\r\n                    setSearchQuery(newValue)\r\n                }}\r\n                onKeyDown={(event: React.KeyboardEvent<HTMLInputElement>) => {\r\n                    if (event.key === \"Enter\") {\r\n                        const target = event.target as HTMLInputElement\r\n                        onSeach && onSeach(target.value)\r\n                    }\r\n                }}\r\n            />\r\n            <button\r\n                onClick={() => {\r\n                    onSeach && onSeach(searchQuery)\r\n                }}\r\n                disabled={!searchQuery.trim()}\r\n            >\r\n                Search\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport styles from \"./Home.module.scss\"\r\nimport { RouteComponentProps } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { actions } from \"../../store/actions\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\nimport { CardGrid } from \"../../shared/cards/CardGrid\"\r\nimport { ScrollContainer } from \"../../shared/scrollContainer/ScrollContainer\"\r\nimport { RootState } from \"../../store/store\"\r\nimport { FetchState } from \"../../store/reducers\"\r\nimport { Search } from \"../../shared/search/Search\"\r\n\r\ninterface HomeProps extends RouteComponentProps {\r\n    className?: string\r\n}\r\n\r\nexport function Home({ className }: HomeProps): JSX.Element {\r\n    const [searchMode, setSearchMode] = useState(false)\r\n\r\n    const cards = useSelector((state: RootState) => state.cardState.cards)\r\n    const { fetchState, searchResponse } = useSelector((state: RootState) => state.cardState.cardListInfo)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        if (!cards?.length) {\r\n            dispatch(actions.getNextCards())\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const handleScrollToBottom = (): void => {\r\n        const cardsCount = cards?.length || 0\r\n        const totalCount = searchResponse?._totalCount\r\n        if (cardsCount === totalCount || fetchState === FetchState.Loading) {\r\n            return\r\n        }\r\n        dispatch(actions.getNextCards())\r\n    }\r\n\r\n    const handleSearch = (query: string): void => {\r\n        if (query.trim()) {\r\n            setSearchMode(true)\r\n            dispatch(actions.resetSearchState())\r\n            dispatch(actions.getNextCards(query.trim()))\r\n        }\r\n    }\r\n\r\n    const handleSearchReset = (): void => {\r\n        if (searchMode) {\r\n            setSearchMode(false)\r\n            dispatch(actions.resetSearchState())\r\n            dispatch(actions.getNextCards())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={buildClassName(\"Home\", styles.Home, className)}>\r\n            <ScrollContainer onScrollToBottom={handleScrollToBottom}>\r\n                <Search onSeach={handleSearch} onReset={handleSearchReset} />\r\n                <CardGrid />\r\n            </ScrollContainer>\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\"\r\nimport styles from \"./Shell.module.scss\"\r\nimport { Switch, Route } from \"react-router-dom\"\r\nimport { NoMatch } from \"./NoMatch\"\r\nimport { Home } from \"../home/Home\"\r\nimport { buildClassName } from \"../../utils/utils\"\r\n\r\ninterface ShellProps {\r\n    className?: string\r\n}\r\n\r\nexport function Shell({ className }: ShellProps): JSX.Element {\r\n    const renderRouters = (): JSX.Element => {\r\n        return (\r\n            <Switch>\r\n                <Route exact={true} path={\"/\"} render={props => <Home {...props} />} />\r\n                <Route component={NoMatch} />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return <div className={buildClassName(\"Shell\", styles.Shell, className)}>{renderRouters()}</div>\r\n}\r\n","import React from \"react\"\nimport \"./App.scss\"\nimport { HashRouter } from \"react-router-dom\"\nimport { Provider } from \"react-redux\"\nimport { store } from \"./store/store\"\nimport { Shell } from \"./pages/shell/Shell\"\n\nconst App = () => {\n    return (\n        <HashRouter>\n            <Provider store={store}>\n                <Shell />\n            </Provider>\n        </HashRouter>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\"\nimport { render } from \"react-dom\"\nimport \"./index.scss\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nrender(<App />, document.getElementById(\"root\"))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__13KuB\",\"name\":\"Card_name__1JNoW\",\"image\":\"Card_image__hYcBS\",\"description\":\"Card_description__2S1dL\",\"property\":\"Card_property__miSIb\",\"title\":\"Card_title__3msqo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CardGrid\":\"CardGrid_CardGrid__1sPE3\",\"cardList\":\"CardGrid_cardList__28h8Q\",\"noResults\":\"CardGrid_noResults__xeT67\",\"error\":\"CardGrid_error__vtpKJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NoMatch\":\"NoMatch_NoMatch__32soE\",\"error\":\"NoMatch_error__3S7W8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search\":\"Search_Search__2nItf\",\"search\":\"Search_search__LkDYF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Shell\":\"Shell_Shell__UHY2-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Home\":\"Home_Home__1yJ2M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__25h87\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ScrollContainer\":\"ScrollContainer_ScrollContainer__3EiLv\"};"],"sourceRoot":""}